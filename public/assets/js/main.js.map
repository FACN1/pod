{"version":3,"sources":["main.js"],"names":["makeRequest","method","url","callback","xhr","XMLHttpRequest","onreadystatechange","readyState","status","responseText","Error","open","send","clickLinkListener","element","addEventListener","event","preventDefault","originalUrl","document","getElementById","href","console","log","err","res","error","innerHTML","window","history","pushState","split","geo","navigator","geolocation","displayLocation","position","NE","shopCoordinates","location","NW","SW","SE","latitude","coords","longitude","getLocation","watchPosition","div","alert","onload"],"mappings":"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","file":"main.js","sourcesContent":["const makeRequest = (method, url, callback) => {\n  const xhr = new XMLHttpRequest();\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        callback(null, xhr.responseText);\n      } else {\n        callback(new Error('Status Code: ', xhr.status));\n      }\n    }\n  };\n\n  xhr.open(method, url);\n  xhr.send();\n};\n\nconst clickLinkListener = (element) => {\n  element.addEventListener('click', (event) => {\n    event.preventDefault();\n\n    const originalUrl = document.getElementById('loadLink').href;\n\n    console.log(event);\n    makeRequest('GET', document.getElementById('loadLink').href, (err, res) => {\n      if (err) {\n        console.error(err);\n        return;\n      }\n      document.getElementById('outerContainer').innerHTML = res;\n      window.history.pushState(null, null, originalUrl.split('?ajax=true')[0]);\n\n      clickLinkListener(document.getElementById('loadLink'));\n    });\n  });\n};\n\nclickLinkListener(document.getElementById('loadLink'));\n\nconst geo = navigator.geolocation;\n\n// If supported run:\nconst displayLocation = (position) => {\n  // Shop Coordinates\n  const NE = shopCoordinates.location.NE;\n  const NW = shopCoordinates.location.NW;\n  const SW = shopCoordinates.location.SW;\n  const SE = shopCoordinates.location.SE;\n\n  const latitude = position.coords.latitude;\n  const longitude = position.coords.longitude;\n\n  // Check if coordinates are within shop geofence\n\n  if (latitude >= NW[0] && latitude <= NE[0] && latitude >= SW[0] && latitude <= SE[0]) {\n    if (longitude >= NW[1] && longitude <= NE[1] && longitude >= SW[1] && longitude <= SE[1]) {\n      return true;\n    }\n  } return false;\n};\n\n// Check for geo support\nconst getLocation = () => {\n  if (geo) {\n    geo.watchPosition((position) => {\n      if (displayLocation(position) === true) {\n        const div = document.getElementById('location');\n        div.innerHTML = 'Welcome to Khan El Shopa';\n      } else {\n        console.log('Not in the shop');\n      }\n    });\n  } else {\n    alert('Geolocation API not supported');\n  }\n};\n\nwindow.onload = getLocation;\n"]}